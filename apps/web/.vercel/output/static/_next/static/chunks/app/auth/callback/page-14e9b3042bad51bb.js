(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[453],{3742:(e,t,r)=>{Promise.resolve().then(r.bind(r,3045))},3045:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c,runtime:()=>i});var n=r(7437),a=r(2265),o=r(6463),s=r(510);let i="edge";function l(){let e=(0,o.useSearchParams)(),t=(0,o.useRouter)(),{completeLogin:r}=(0,s.a)(),[i,l]=(0,a.useState)("loading"),[c,u]=(0,a.useState)("Completing authentication...");return(0,a.useEffect)(()=>{let n=e.get("token"),a=e.get("error");if(a){l("error"),u("Authentication failed: ".concat(a));return}if(n)r(n),l("success"),u("Authentication successful! Redirecting..."),setTimeout(()=>{t.push("/")},1e3);else{if(localStorage.getItem("auth_token")){t.push("/");return}l("error"),u("No authentication token received")}},[e,t,r]),(0,n.jsxs)("div",{className:"container",style:{padding:"80px 24px",textAlign:"center",minHeight:"60vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:["loading"===i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"spinner",style:{marginBottom:"24px"}}),(0,n.jsx)("p",{style:{color:"var(--text-secondary)"},children:c})]}),"success"===i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{style:{fontSize:"4rem",marginBottom:"24px"},children:"✅"}),(0,n.jsx)("h1",{style:{marginBottom:"12px"},children:"Welcome!"}),(0,n.jsx)("p",{style:{color:"var(--text-secondary)"},children:c})]}),"error"===i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{style:{fontSize:"4rem",marginBottom:"24px"},children:"❌"}),(0,n.jsx)("h1",{style:{marginBottom:"12px",color:"var(--error)"},children:"Authentication Failed"}),(0,n.jsx)("p",{style:{color:"var(--text-secondary)",marginBottom:"24px"},children:c}),(0,n.jsx)("a",{href:"/api/v1/auth/github",className:"btn btn-primary",children:"Try Again"})]})]})}function c(){return(0,n.jsx)(a.Suspense,{fallback:(0,n.jsx)("div",{className:"container",style:{padding:"80px 24px",textAlign:"center"},children:(0,n.jsx)("div",{className:"spinner"})}),children:(0,n.jsx)(l,{})})}},510:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>l,a:()=>c});var n=r(7437),a=r(2265),o=r(357);let s=(0,a.createContext)(void 0),i=o.env.NEXT_PUBLIC_API_URL||"/api/v1";function l(e){let{children:t}=e,[r,o]=(0,a.useState)(null),[l,c]=(0,a.useState)(null),[u,h]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=localStorage.getItem("auth_token");e?(c(e),d(e)):h(!1)},[]);let d=async e=>{try{let t=await fetch("".concat(i,"/auth/me"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();o(e)}else localStorage.removeItem("auth_token"),c(null)}catch(e){console.error("Failed to fetch user:",e)}finally{h(!1)}};return(0,n.jsx)(s.Provider,{value:{user:r,token:l,loading:u,login:()=>{window.location.href="".concat(i,"/auth/github")},logout:()=>{localStorage.removeItem("auth_token"),o(null),c(null)},completeLogin:e=>{localStorage.setItem("auth_token",e),c(e),d(e)}},children:t})}function c(){let e=(0,a.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},6463:(e,t,r)=>{"use strict";var n=r(1169);r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})}},e=>{var t=t=>e(e.s=t);e.O(0,[130,215,744],()=>t(3742)),_N_E=e.O()}]);