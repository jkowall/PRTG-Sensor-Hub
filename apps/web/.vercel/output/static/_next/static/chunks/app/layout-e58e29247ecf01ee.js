(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{909:(e,t,r)=>{"use strict";r.d(t,{ThemeToggle:()=>i});var l=r(5155),n=r(2115),o=r(935);function i(){let{theme:e,toggleTheme:t}=(0,o.D)(),[r,i]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{i(!0)},[]),r)?(0,l.jsx)("button",{onClick:t,className:"theme-toggle","aria-label":"Switch to ".concat("light"===e?"dark":"light"," mode"),title:"Switch to ".concat("light"===e?"dark":"light"," mode"),children:"light"===e?"\uD83C\uDF19":"☀️"}):(0,l.jsx)("div",{className:"w-8 h-8"})}},935:(e,t,r)=>{"use strict";r.d(t,{D:()=>a,ThemeProvider:()=>i});var l=r(5155),n=r(2115);let o=(0,n.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,n.useState)("dark"),[a,s]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let e=localStorage.getItem("theme");e?i(e):window.matchMedia("(prefers-color-scheme: dark)").matches?i("dark"):i("light"),s(!0)},[]),(0,n.useEffect)(()=>{a&&(document.documentElement.setAttribute("data-theme",r),localStorage.setItem("theme",r))},[r,a]),(0,l.jsx)(o.Provider,{value:{theme:r,toggleTheme:()=>{i(e=>"light"===e?"dark":"light")}},children:t})}function a(){let e=(0,n.useContext)(o);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},1290:()=>{},2382:(e,t,r)=>{"use strict";r.d(t,{UserMenu:()=>a});var l=r(5155),n=r(8818),o=r(2619),i=r.n(o);function a(){let{user:e,loading:t,login:r,logout:o}=(0,n.A)();return t?(0,l.jsx)("div",{style:{width:"100px"}}):e?(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.is_admin&&(0,l.jsx)(i(),{href:"/admin",className:"nav-link",style:{color:"var(--accent-primary)"},children:"Admin"}),(0,l.jsx)(i(),{href:"/my-sensors",className:"nav-link",children:"My Sensors"}),(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.avatar_url&&(0,l.jsx)("img",{src:e.avatar_url,alt:e.github_username||"User",style:{width:"32px",height:"32px",borderRadius:"50%",border:"2px solid var(--border-color)"}}),(0,l.jsx)("span",{style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:e.github_username||e.email})]}),(0,l.jsx)("button",{onClick:o,className:"btn btn-outline",style:{padding:"6px 12px",fontSize:"0.85rem"},children:"Logout"})]}):(0,l.jsx)("button",{onClick:r,className:"btn btn-primary",style:{padding:"8px 16px"},children:"Login with GitHub"})}},4354:(e,t,r)=>{Promise.resolve().then(r.bind(r,909)),Promise.resolve().then(r.bind(r,2382)),Promise.resolve().then(r.bind(r,8818)),Promise.resolve().then(r.bind(r,935)),Promise.resolve().then(r.t.bind(r,1290,23)),Promise.resolve().then(r.t.bind(r,2619,23)),Promise.resolve().then(r.t.bind(r,1356,23))},8818:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,AuthProvider:()=>s});var l=r(5155),n=r(2115),o=r(5704);let i=(0,n.createContext)(void 0),a=o.env.NEXT_PUBLIC_API_URL||"/api/v1";function s(e){let{children:t}=e,[r,o]=(0,n.useState)(null),[s,c]=(0,n.useState)(null),[u,h]=(0,n.useState)(!0);(0,n.useEffect)(()=>{let e=localStorage.getItem("auth_token");e?(c(e),d(e)):h(!1)},[]);let d=async e=>{try{let t=await fetch("".concat(a,"/auth/me"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();o(e)}else localStorage.removeItem("auth_token"),c(null)}catch(e){console.error("Failed to fetch user:",e)}finally{h(!1)}};return(0,l.jsx)(i.Provider,{value:{user:r,token:s,loading:u,login:()=>{window.location.href="".concat(a,"/auth/github")},logout:()=>{localStorage.removeItem("auth_token"),o(null),c(null)},completeLogin:e=>{localStorage.setItem("auth_token",e),c(e),d(e)}},children:t})}function c(){let e=(0,n.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{e.O(0,[741,619,356,441,255,358],()=>e(e.s=4354)),_N_E=e.O()}]);