(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{6884:(e,t,r)=>{Promise.resolve().then(r.bind(r,2030)),Promise.resolve().then(r.bind(r,4949)),Promise.resolve().then(r.bind(r,510)),Promise.resolve().then(r.bind(r,6399)),Promise.resolve().then(r.t.bind(r,5214,23)),Promise.resolve().then(r.t.bind(r,8173,23)),Promise.resolve().then(r.t.bind(r,231,23))},2030:(e,t,r)=>{"use strict";r.d(t,{ThemeToggle:()=>n});var l=r(7437),a=r(2265),i=r(6399);function n(){let{theme:e,toggleTheme:t}=(0,i.F)(),[r,n]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{n(!0)},[]),r)?(0,l.jsx)("button",{onClick:t,className:"theme-toggle","aria-label":"Switch to ".concat("light"===e?"dark":"light"," mode"),title:"Switch to ".concat("light"===e?"dark":"light"," mode"),children:"light"===e?"\uD83C\uDF19":"☀️"}):(0,l.jsx)("div",{className:"w-8 h-8"})}},4949:(e,t,r)=>{"use strict";r.d(t,{UserMenu:()=>n});var l=r(7437),a=r(510),i=r(7138);function n(){let{user:e,loading:t,login:r,logout:n}=(0,a.a)();return t?(0,l.jsx)("div",{style:{width:"100px"}}):e?(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.is_admin&&(0,l.jsx)(i.default,{href:"/admin",className:"nav-link",style:{color:"var(--accent-primary)"},children:"Admin"}),(0,l.jsx)(i.default,{href:"/my-sensors",className:"nav-link",children:"My Sensors"}),(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.avatar_url&&(0,l.jsx)("img",{src:e.avatar_url,alt:e.github_username||"User",style:{width:"32px",height:"32px",borderRadius:"50%",border:"2px solid var(--border-color)"}}),(0,l.jsx)("span",{style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:e.github_username||e.email})]}),(0,l.jsx)("button",{onClick:n,className:"btn btn-outline",style:{padding:"6px 12px",fontSize:"0.85rem"},children:"Logout"})]}):(0,l.jsx)("button",{onClick:r,className:"btn btn-primary",style:{padding:"8px 16px"},children:"Login with GitHub"})}},510:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>s,a:()=>c});var l=r(7437),a=r(2265),i=r(357);let n=(0,a.createContext)(void 0),o=i.env.NEXT_PUBLIC_API_URL||"/api/v1";function s(e){let{children:t}=e,[r,i]=(0,a.useState)(null),[s,c]=(0,a.useState)(null),[u,d]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=localStorage.getItem("auth_token");e?(c(e),h(e)):d(!1)},[]);let h=async e=>{try{let t=await fetch("".concat(o,"/auth/me"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();i(e)}else localStorage.removeItem("auth_token"),c(null)}catch(e){console.error("Failed to fetch user:",e)}finally{d(!1)}};return(0,l.jsx)(n.Provider,{value:{user:r,token:s,loading:u,login:()=>{window.location.href="".concat(o,"/auth/github")},logout:()=>{localStorage.removeItem("auth_token"),i(null),c(null)},completeLogin:e=>{localStorage.setItem("auth_token",e),c(e),h(e)}},children:t})}function c(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},6399:(e,t,r)=>{"use strict";r.d(t,{F:()=>o,ThemeProvider:()=>n});var l=r(7437),a=r(2265);let i=(0,a.createContext)(void 0);function n(e){let{children:t}=e,[r,n]=(0,a.useState)("dark"),[o,s]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=localStorage.getItem("theme");e?n(e):window.matchMedia("(prefers-color-scheme: dark)").matches?n("dark"):n("light"),s(!0)},[]),(0,a.useEffect)(()=>{o&&(document.documentElement.setAttribute("data-theme",r),localStorage.setItem("theme",r))},[r,o]),(0,l.jsx)(i.Provider,{value:{theme:r,toggleTheme:()=>{n(e=>"light"===e?"dark":"light")}},children:t})}function o(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},5214:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[788,138,173,130,215,744],()=>t(6884)),_N_E=e.O()}]);