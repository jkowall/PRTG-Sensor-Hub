(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[499],{63:(e,s,r)=>{"use strict";var t=r(7260);r.o(t,"useRouter")&&r.d(s,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(s,{useSearchParams:function(){return t.useSearchParams}})},346:(e,s,r)=>{"use strict";r.d(s,{G:()=>a});var t=r(5155);function a(e){if(!e)return"";let s=e.split(/(\*\*.*?\*\*)/g);return(0,t.jsx)(t.Fragment,{children:s.map((e,s)=>e.startsWith("**")&&e.endsWith("**")&&e.length>=4?(0,t.jsx)("strong",{children:e.slice(2,-2)},s):e)})}r(2115)},3323:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>u});var t=r(5155),a=r(2115),n=r(8818),i=r(63),o=r(2619),l=r.n(o),d=r(346);let c=r(5704).env.NEXT_PUBLIC_API_URL||"/api/v1";function u(){let{user:e,loading:s}=(0,n.A)(),r=(0,i.useRouter)(),[o,u]=(0,a.useState)([]),[h,p]=(0,a.useState)(!0),[m,x]=(0,a.useState)(null);return((0,a.useEffect)(()=>{s||e||r.push("/")},[e,s,r]),(0,a.useEffect)(()=>{async function s(){if(e){p(!0),x(null);try{let s=new URLSearchParams;s.append("owner_id",e.id),s.append("page_size","100");let r=await fetch("".concat(c,"/sensors?").concat(s));if(!r.ok)throw Error("API error: ".concat(r.status));let t=await r.json();u(t.items)}catch(e){console.error("Failed to fetch sensors:",e),x("Failed to load your sensors.")}finally{p(!1)}}}e&&s()},[e]),s||!e&&h)?(0,t.jsx)("div",{className:"container",style:{padding:"40px",textAlign:"center"},children:(0,t.jsx)("div",{className:"spinner"})}):(0,t.jsxs)("div",{className:"container",style:{padding:"var(--section-spacing) 0"},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{children:"My Sensors"}),(0,t.jsx)("p",{style:{color:"var(--text-muted)",marginTop:"8px"},children:"Manage the sensors you have submitted to the registry."})]}),(0,t.jsxs)(l(),{href:"/submit",className:"button primary",style:{display:"inline-flex",alignItems:"center",gap:"8px"},children:[(0,t.jsx)("span",{children:"+"})," Submit New Sensor"]})]}),m&&(0,t.jsx)("div",{style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--error)",borderRadius:"var(--border-radius)",padding:"16px",marginBottom:"24px",color:"var(--error)"},children:m}),h?(0,t.jsx)("div",{className:"loading",children:(0,t.jsx)("div",{className:"spinner"})}):o.length>0?(0,t.jsx)("div",{className:"sensor-grid",children:o.map(e=>(0,t.jsxs)("div",{className:"sensor-card",style:{position:"relative"},children:[(0,t.jsxs)("div",{className:"sensor-card-header",children:[(0,t.jsx)("h3",{className:"sensor-name",children:(0,t.jsx)(l(),{href:"/sensors/".concat(e.slug),style:{color:"inherit",textDecoration:"none"},children:e.display_name})}),(0,t.jsxs)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",marginBottom:"8px"},children:[(0,t.jsx)("span",{className:"sensor-category",children:e.category}),"pending"===e.status&&(0,t.jsx)("span",{className:"badge badge-pending",children:"Pending"}),"certified"===e.status&&(0,t.jsx)("span",{className:"badge badge-certified",children:"Certified"}),"approved"===e.status&&(0,t.jsx)("span",{className:"badge badge-approved",children:"Approved"})]})]}),(0,t.jsx)("p",{className:"sensor-description",children:(0,d.G)(e.description)}),(0,t.jsxs)("div",{className:"sensor-meta",children:[(0,t.jsxs)("span",{children:["⬇️ ",e.total_downloads.toLocaleString()," downloads"]}),(0,t.jsx)("span",{className:"status-badge ".concat(e.is_verified?"verified":"pending"),style:{padding:"2px 8px",borderRadius:"12px",fontSize:"0.75rem",background:e.is_verified?"rgba(16, 185, 129, 0.1)":"rgba(245, 158, 11, 0.1)",color:e.is_verified?"var(--success)":"var(--warning)"},children:e.is_verified?"verified":"pending review"})]}),(0,t.jsx)("div",{style:{marginTop:"16px",display:"flex",gap:"8px"},children:(0,t.jsx)(l(),{href:"/submit?edit=".concat(e.slug),className:"button secondary",style:{fontSize:"0.85rem",padding:"6px 12px",width:"100%",textAlign:"center"},children:"Add Version"})})]},e.id))}):(0,t.jsxs)("div",{style:{textAlign:"center",padding:"60px",background:"var(--surface-color)",borderRadius:"var(--border-radius)",border:"1px solid var(--border-color)"},children:[(0,t.jsx)("div",{style:{fontSize:"3rem",marginBottom:"16px"},children:"\uD83D\uDCE6"}),(0,t.jsx)("h3",{style:{marginBottom:"8px"},children:"No sensors yet"}),(0,t.jsx)("p",{style:{color:"var(--text-muted)",marginBottom:"24px"},children:"You haven't submitted any sensors yet. Contribute your first sensor to the community!"}),(0,t.jsx)(l(),{href:"/submit",className:"button primary",children:"Submit a Sensor"})]})]})}},8818:(e,s,r)=>{"use strict";r.d(s,{A:()=>d,AuthProvider:()=>l});var t=r(5155),a=r(2115),n=r(5704);let i=(0,a.createContext)(void 0),o=n.env.NEXT_PUBLIC_API_URL||"/api/v1";function l(e){let{children:s}=e,[r,n]=(0,a.useState)(null),[l,d]=(0,a.useState)(null),[c,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=localStorage.getItem("auth_token");e?(d(e),h(e)):u(!1)},[]);let h=async e=>{try{let s=await fetch("".concat(o,"/auth/me"),{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){let e=await s.json();n(e)}else localStorage.removeItem("auth_token"),d(null)}catch(e){console.error("Failed to fetch user:",e)}finally{u(!1)}};return(0,t.jsx)(i.Provider,{value:{user:r,token:l,loading:c,login:()=>{window.location.href="".concat(o,"/auth/github")},logout:()=>{localStorage.removeItem("auth_token"),n(null),d(null)},completeLogin:e=>{localStorage.setItem("auth_token",e),d(e),h(e)}},children:s})}function d(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9315:(e,s,r)=>{Promise.resolve().then(r.bind(r,3323))}},e=>{e.O(0,[619,441,255,358],()=>e(e.s=9315)),_N_E=e.O()}]);