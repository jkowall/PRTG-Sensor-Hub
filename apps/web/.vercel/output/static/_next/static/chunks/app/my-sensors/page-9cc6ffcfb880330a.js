(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[539],{5053:(e,s,t)=>{Promise.resolve().then(t.bind(t,6624))},510:(e,s,t)=>{"use strict";t.d(s,{AuthProvider:()=>l,a:()=>d});var r=t(7437),a=t(2265),n=t(357);let i=(0,a.createContext)(void 0),o=n.env.NEXT_PUBLIC_API_URL||"/api/v1";function l(e){let{children:s}=e,[t,n]=(0,a.useState)(null),[l,d]=(0,a.useState)(null),[c,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=localStorage.getItem("auth_token");e?(d(e),h(e)):u(!1)},[]);let h=async e=>{try{let s=await fetch("".concat(o,"/auth/me"),{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){let e=await s.json();n(e)}else localStorage.removeItem("auth_token"),d(null)}catch(e){console.error("Failed to fetch user:",e)}finally{u(!1)}};return(0,r.jsx)(i.Provider,{value:{user:t,token:l,loading:c,login:()=>{window.location.href="".concat(o,"/auth/github")},logout:()=>{localStorage.removeItem("auth_token"),n(null),d(null)},completeLogin:e=>{localStorage.setItem("auth_token",e),d(e),h(e)}},children:s})}function d(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},6624:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var r=t(7437),a=t(2265),n=t(510),i=t(6463),o=t(7138),l=t(3498);let d=t(357).env.NEXT_PUBLIC_API_URL||"/api/v1";function c(){let{user:e,loading:s}=(0,n.a)(),t=(0,i.useRouter)(),[c,u]=(0,a.useState)([]),[h,p]=(0,a.useState)(!0),[m,x]=(0,a.useState)(null);return((0,a.useEffect)(()=>{s||e||t.push("/")},[e,s,t]),(0,a.useEffect)(()=>{async function s(){if(e){p(!0),x(null);try{let s=new URLSearchParams;s.append("owner_id",e.id),s.append("page_size","100");let t=await fetch("".concat(d,"/sensors?").concat(s));if(!t.ok)throw Error("API error: ".concat(t.status));let r=await t.json();u(r.items)}catch(e){console.error("Failed to fetch sensors:",e),x("Failed to load your sensors.")}finally{p(!1)}}}e&&s()},[e]),s||!e&&h)?(0,r.jsx)("div",{className:"container",style:{padding:"40px",textAlign:"center"},children:(0,r.jsx)("div",{className:"spinner"})}):(0,r.jsxs)("div",{className:"container",style:{padding:"var(--section-spacing) 0"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{children:"My Sensors"}),(0,r.jsx)("p",{style:{color:"var(--text-muted)",marginTop:"8px"},children:"Manage the sensors you have submitted to the registry."})]}),(0,r.jsxs)(o.default,{href:"/submit",className:"button primary",style:{display:"inline-flex",alignItems:"center",gap:"8px"},children:[(0,r.jsx)("span",{children:"+"})," Submit New Sensor"]})]}),m&&(0,r.jsx)("div",{style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--error)",borderRadius:"var(--border-radius)",padding:"16px",marginBottom:"24px",color:"var(--error)"},children:m}),h?(0,r.jsx)("div",{className:"loading",children:(0,r.jsx)("div",{className:"spinner"})}):c.length>0?(0,r.jsx)("div",{className:"sensor-grid",children:c.map(e=>(0,r.jsxs)("div",{className:"sensor-card",style:{position:"relative"},children:[(0,r.jsxs)("div",{className:"sensor-card-header",children:[(0,r.jsx)("h3",{className:"sensor-name",children:(0,r.jsx)(o.default,{href:"/sensors/".concat(e.slug),style:{color:"inherit",textDecoration:"none"},children:e.display_name})}),(0,r.jsxs)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",marginBottom:"8px"},children:[(0,r.jsx)("span",{className:"sensor-category",children:e.category}),"pending"===e.status&&(0,r.jsx)("span",{className:"badge badge-pending",children:"Pending"}),"certified"===e.status&&(0,r.jsx)("span",{className:"badge badge-certified",children:"Certified"})]})]}),(0,r.jsx)("p",{className:"sensor-description",children:(0,l.o)(e.description)}),(0,r.jsxs)("div",{className:"sensor-meta",children:[(0,r.jsxs)("span",{children:["⬇️ ",e.total_downloads.toLocaleString()," downloads"]}),(0,r.jsx)("span",{className:"status-badge ".concat(e.is_verified?"verified":"pending"),style:{padding:"2px 8px",borderRadius:"12px",fontSize:"0.75rem",background:e.is_verified?"rgba(16, 185, 129, 0.1)":"rgba(245, 158, 11, 0.1)",color:e.is_verified?"var(--success)":"var(--warning)"},children:e.is_verified?"verified":"pending review"})]}),(0,r.jsx)("div",{style:{marginTop:"16px",display:"flex",gap:"8px"},children:(0,r.jsx)(o.default,{href:"/submit?edit=".concat(e.slug),className:"button secondary",style:{fontSize:"0.85rem",padding:"6px 12px",width:"100%",textAlign:"center"},children:"Add Version"})})]},e.id))}):(0,r.jsxs)("div",{style:{textAlign:"center",padding:"60px",background:"var(--surface-color)",borderRadius:"var(--border-radius)",border:"1px solid var(--border-color)"},children:[(0,r.jsx)("div",{style:{fontSize:"3rem",marginBottom:"16px"},children:"\uD83D\uDCE6"}),(0,r.jsx)("h3",{style:{marginBottom:"8px"},children:"No sensors yet"}),(0,r.jsx)("p",{style:{color:"var(--text-muted)",marginBottom:"24px"},children:"You haven't submitted any sensors yet. Contribute your first sensor to the community!"}),(0,r.jsx)(o.default,{href:"/submit",className:"button primary",children:"Submit a Sensor"})]})]})}},3498:(e,s,t)=>{"use strict";t.d(s,{o:()=>a});var r=t(7437);function a(e){if(!e)return"";let s=e.split(/(\*\*.*?\*\*)/g);return(0,r.jsx)(r.Fragment,{children:s.map((e,s)=>e.startsWith("**")&&e.endsWith("**")&&e.length>=4?(0,r.jsx)("strong",{children:e.slice(2,-2)},s):e)})}t(2265)},6463:(e,s,t)=>{"use strict";var r=t(1169);t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})}},e=>{var s=s=>e(e.s=s);e.O(0,[138,130,215,744],()=>s(5053)),_N_E=e.O()}]);