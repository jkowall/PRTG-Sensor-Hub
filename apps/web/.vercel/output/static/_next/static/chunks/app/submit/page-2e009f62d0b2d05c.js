(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[369],{8723:(e,t,r)=>{Promise.resolve().then(r.bind(r,7348))},510:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>n,a:()=>c});var a=r(7437),s=r(2265),i=r(357);let o=(0,s.createContext)(void 0),l=i.env.NEXT_PUBLIC_API_URL||"/api/v1";function n(e){let{children:t}=e,[r,i]=(0,s.useState)(null),[n,c]=(0,s.useState)(null),[p,d]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=localStorage.getItem("auth_token");e?(c(e),m(e)):d(!1)},[]);let m=async e=>{try{let t=await fetch("".concat(l,"/auth/me"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();i(e)}else localStorage.removeItem("auth_token"),c(null)}catch(e){console.error("Failed to fetch user:",e)}finally{d(!1)}};return(0,a.jsx)(o.Provider,{value:{user:r,token:n,loading:p,login:()=>{window.location.href="".concat(l,"/auth/github")},logout:()=>{localStorage.removeItem("auth_token"),i(null),c(null)},completeLogin:e=>{localStorage.setItem("auth_token",e),c(e),m(e)}},children:t})}function c(){let e=(0,s.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},7348:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m,runtime:()=>n});var a=r(7437),s=r(2265),i=r(510),o=r(7138),l=r(357);let n="edge",c=l.env.NEXT_PUBLIC_API_URL||"/api/v1",p=["PowerShell","Python","JavaScript","Batch","Shell","Other"],d=["Docker","Kubernetes","Cloud","Security","Database","Network","Hardware","Application","Other"];function m(){let{user:e,token:t,login:r}=(0,i.a)(),[l,n]=(0,s.useState)(!1),[m,u]=(0,s.useState)(!1),[h,x]=(0,s.useState)(null),[y,g]=(0,s.useState)("upload"),[b,v]=(0,s.useState)({first_name:"",last_name:"",work_email:"",repository_url:"",monitored_system:"Other",script_language:"PowerShell",monitored_statistics:"",description:""}),[j,f]=(0,s.useState)(null),_=e=>{v({...b,[e.target.name]:e.target.value})},w=async e=>{e.preventDefault(),n(!0),x(null);try{if("upload"===y&&!j)throw Error("Please select a script file to upload.");if("link"===y&&!b.repository_url)throw Error("Please provide a repository URL.");let e=new FormData;e.append("display_name","".concat(b.monitored_system," Sensor (").concat(b.script_language,")")),e.append("description","".concat(b.description,"\n\n**Monitored Statistics:** ").concat(b.monitored_statistics)),e.append("category",b.monitored_system),e.append("tags",JSON.stringify([b.script_language].filter(Boolean))),e.append("script_language",b.script_language),"upload"===y&&j?e.append("file",j):e.append("repository_url",b.repository_url);let r=await fetch("".concat(c,"/sensors"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:e});if(!r.ok){let e=await r.json();throw Error(e.detail||e.error||"Failed to submit sensor")}u(!0)}catch(e){x(e instanceof Error?e.message:"An error occurred")}finally{n(!1)}};return e?m?(0,a.jsxs)("div",{className:"container",style:{padding:"80px 24px",textAlign:"center"},children:[(0,a.jsx)("div",{style:{fontSize:"4rem",marginBottom:"24px"},children:"\uD83C\uDF89"}),(0,a.jsx)("h1",{children:"Script Submitted!"}),(0,a.jsx)("p",{style:{color:"var(--text-muted)",marginTop:"16px",marginBottom:"24px"},children:"Your script has been added to the registry."}),(0,a.jsx)(o.default,{href:"/",className:"btn btn-primary",children:"Back to Home"})]}):(0,a.jsxs)("div",{className:"container",style:{padding:"40px 24px",maxWidth:"700px"},children:[(0,a.jsx)("h1",{style:{marginBottom:"16px"},children:"Submit your script"}),(0,a.jsx)("p",{style:{marginBottom:"16px"},children:"Do you have a PRTG related script you want to contribute? Perfect! Please make it available on Github and share it with us."}),(0,a.jsxs)("p",{style:{marginBottom:"32px"},children:[(0,a.jsx)("strong",{children:"Important:"})," Please remember to add a corresponding license to the repository. If you're unsure which one to use, have a look at ",(0,a.jsx)("a",{href:"https://www.choosealicense.com",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--accent-primary)"},children:"www.choosealicense.com"}),"."]}),h&&(0,a.jsx)("div",{style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--error)",borderRadius:"var(--border-radius-sm)",padding:"12px 16px",marginBottom:"24px",color:"var(--error)"},children:h}),(0,a.jsxs)("form",{onSubmit:w,children:[(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",marginBottom:"20px"},children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:["First name",(0,a.jsx)("span",{style:{color:"var(--error)"},children:"*"})]}),(0,a.jsx)("input",{type:"text",name:"first_name",value:b.first_name,onChange:_,required:!0,className:"search-input"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:["Last name",(0,a.jsx)("span",{style:{color:"var(--error)"},children:"*"})]}),(0,a.jsx)("input",{type:"text",name:"last_name",value:b.last_name,onChange:_,required:!0,className:"search-input"})]})]}),(0,a.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,a.jsxs)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:["Work email",(0,a.jsx)("span",{style:{color:"var(--error)"},children:"*"})]}),(0,a.jsx)("input",{type:"email",name:"work_email",value:b.work_email,onChange:_,required:!0,className:"search-input"})]}),(0,a.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"Submission Type"}),(0,a.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[(0,a.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[(0,a.jsx)("input",{type:"radio",name:"submissionType",checked:"upload"===y,onChange:()=>g("upload")}),"Upload Script (Official)"]}),(0,a.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[(0,a.jsx)("input",{type:"radio",name:"submissionType",checked:"link"===y,onChange:()=>g("link")}),"Link External Repository"]})]})]}),"upload"===y?(0,a.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,a.jsxs)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:["Script File (.ps1, .py, .js, .bat, .sh)",(0,a.jsx)("span",{style:{color:"var(--error)"},children:"*"})]}),(0,a.jsx)("input",{type:"file",onChange:e=>{e.target.files&&e.target.files[0]&&f(e.target.files[0])},required:!0,className:"search-input",accept:".ps1,.py,.js,.bat,.sh,.txt",style:{padding:"8px"}}),(0,a.jsx)("p",{style:{fontSize:"0.8rem",color:"var(--text-muted)",marginTop:"4px"},children:"Your script will be uploaded via a Pull Request for review."})]}):(0,a.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,a.jsxs)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:["Repository URL",(0,a.jsx)("span",{style:{color:"var(--error)"},children:"*"})]}),(0,a.jsx)("input",{type:"url",name:"repository_url",value:b.repository_url,onChange:_,required:!0,className:"search-input",placeholder:"https://github.com/username/repo"})]}),(0,a.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"Monitored System"}),(0,a.jsx)("select",{name:"monitored_system",value:b.monitored_system,onChange:_,className:"search-input",children:d.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"Script Language"}),(0,a.jsx)("select",{name:"script_language",value:b.script_language,onChange:_,className:"search-input",children:p.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"Monitored Statistics"}),(0,a.jsx)("input",{type:"text",name:"monitored_statistics",value:b.monitored_statistics,onChange:_,className:"search-input"})]}),(0,a.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"Description"}),(0,a.jsx)("textarea",{name:"description",value:b.description,onChange:_,rows:4,className:"search-input",style:{resize:"vertical"}})]}),(0,a.jsx)("button",{type:"submit",className:"btn btn-primary",style:{width:"100%",marginBottom:"32px"},disabled:l,children:l?"Submitting...":"Submit"}),(0,a.jsxs)("p",{style:{fontSize:"0.9rem",color:"var(--text-muted)"},children:["We process your data in accordance with our ",(0,a.jsx)("a",{href:"https://www.paessler.com/privacy-policy",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--accent-primary)"},children:"privacy policy"}),"."]})]})]}):(0,a.jsxs)("div",{className:"container",style:{padding:"80px 24px",textAlign:"center"},children:[(0,a.jsx)("h1",{children:"Submit your script"}),(0,a.jsx)("p",{style:{color:"var(--text-muted)",marginTop:"16px",marginBottom:"24px"},children:"Please login with GitHub to submit your script."}),(0,a.jsx)("button",{onClick:r,className:"btn btn-primary",children:"Login with GitHub"})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[138,130,215,744],()=>t(8723)),_N_E=e.O()}]);